# Получение трехадресного кода из графа потока управления !heading

###  Команда BOOM

#### Постановка задачи

Задача состояла в преобразовании графа потока управления в трехадресный код.

#### Зависимости задач в графе задач

Данная задача не зависит от других задач в графе задач и не порождает новых зависимостей.

#### Теория

Для некоторых задач необходим код в формате трехадресного кода, поэтому данная задача заключается в том, чтобы из имеющегося объекта ControlFlowGraph получить трехадресный код.

#### Особенности реализации

```
public LinkedList<ThreeCode> GetThreeAddressCode()
{
    var res = new LinkedList<ThreeCode>();
    foreach(var block in this.blocks)
    {
        foreach(var code in block)
        {
            res.AddLast(code);
        }
    }
    return res;
}
```

Для выполнения задачи у нас имеется объект класса ControlFlowGraph, который содержит два поля: Graph cfg и List<LinkedList<ThreeCode>> blocks. Для получения трехадресного кода из графа потока управления, мы берем поле blocks и проходим по каждой команде в каждом блоке, добавляя команды в трехадресный код.


#### Тесты

Программа до применения оптимизации:
```
{
	int t1, t2, t3, i, a;
	t1 = 4 * i;
	if (true)
	{
		t3 = 4 * i;
	}
	t2 = 4 * i;
}
```

Программа после применения оптимизации:
```
{
	int t1, t2, t3, i, a;
	t1 = 4 * i;
	if (true)
	{
		t3 = 4 * i;
	}
	t2 = 4 * i;
}
```

Получаем трехадресный код программы в следующем виде.
```
            t1 = 4 * i
            if True goto label_0
            goto label_1
label_0:
            t3 = 4 * i
label_1:    t2 = 4 * i
```

[Вверх](#содержание)